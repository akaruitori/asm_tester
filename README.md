# Assembler tester
_Tester script for assembler program from school 42's project Corewar_

### Tests include:
* accuracy check of assembler: by comparing resulted binary file with file generated by reference assembler executable;
* accuracy check of disassembler: by taking the disassembled by tested disassembler source file and performing the assembler check;
* check for memory leaks: by running valgrind and examine output;
* check for memory error: also checking valgrind output;
* measuring execution time with large files as argument;

**_Needs python 3.6+ and valgrind_**

### Installation:
At the corewar project root folder do the following:
```sh
git clone https://github.com/akaruitori/asm_tester.git test_asm
```

Before the first launch make sure that your assembler is compiled, and change the name of executable to compare results with in file **`tester_congig.py`**:
```python
school_asm = 'test_asm/school_asm_mac'
```
or
```python
school_asm = 'test_asm/school_asm_linux'
```
Note that path to tested assembler also can be modified.


### Usage:
```
./test_asm/tester.py
```

#### With arbitary files:
By default uses it's own files to check, checks with other files if specified:
```
./test_asm/tester.py some_file.s another_one.cor some_dir
```
#### Express check:
As leaks & memory check takes quite a bit of time, tester supports express mode:
```
./test_asm/tester.py -e
```

#### Verbose mode:
Tester has more informative mode with printing of programs output in case of an error:
```
./test_asm/tester.py -v
```

#### Check for leaks for program with options:
Also it can check if leaks or errors occur when launching assembler/disassembler with arbitrary options:
```
./test_asm/tester.py -o a w
```
_checking for leaks the following commands:_ `./tested_asm test_file` `./tested_asm -a test_file` `./tested_asm -w test_file`

#### Compare execution time:
Performance check on a few large asm files:
```
./test_asm/tester.py -t
```

#### Reversed mode:
And there is a fun reversed mode when tested and school executables are switched places:
```
./test_asm/tester.py -r
```
